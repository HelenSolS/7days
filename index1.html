<script>
  const tg = window.Telegram?.WebApp || null;

  // –í –±—Ä–∞—É–∑–µ—Ä–µ tg = null, –≤ Telegram tg = –æ–±—ä–µ–∫—Ç
  if (tg) {
    tg.expand();
    tg.ready?.();
  } else {
    console.log("–û—Ç–∫—Ä—ã—Ç–æ –Ω–µ –≤ Telegram WebApp, —Ä–µ–∂–∏–º –ø—Ä–µ–¥–ø—Ä–æ—Å–º–æ—Ç—Ä–∞.");
  }

  const urlParams = new URLSearchParams(window.location.search);
  const day = urlParams.get('day') || "1";

  // ... —Ç–≤–æ–π contentData ...

  function render() {
    const data = contentData[day];
    const app = document.getElementById('app');
    if (!data) {
      app.innerHTML = `<div class="py-20 text-center text-stone-300">–ö–æ–Ω—Ç–µ–Ω—Ç –≥–æ—Ç–æ–≤–∏—Ç—Å—è...</div>`;
      return;
    }
    app.innerHTML = `...`; // –∫–∞–∫ —É —Ç–µ–±—è
  }

  async function handleSend() {
    const val = document.getElementById('answer').value;

    // –í –±—Ä–∞—É–∑–µ—Ä–µ —Ä–∞–∑—Ä–µ—à–∏–º –æ—Ç–ø—Ä–∞–≤–∏—Ç—å "–∫–∞–∫ —Ç–µ—Å—Ç" –∏–ª–∏ –ø–æ–∫–∞–∂–µ–º –ø–æ–¥—Å–∫–∞–∑–∫—É
    if (!val) {
      if (tg) tg.HapticFeedback.notificationOccurred('warning');
      alert("–ù–∞–ø–∏—à–∏ –æ—Ç–≤–µ—Ç üôÇ");
      return;
    }

    const report = {
      day,
      user: tg?.initDataUnsafe?.user?.first_name || "Preview",
      answer: val,
      date: new Date().toLocaleString('ru-RU')
    };

    if (!tg) {
      alert("–≠—Ç–æ –ø—Ä–µ–¥–ø—Ä–æ—Å–º–æ—Ç—Ä –≤ –±—Ä–∞—É–∑–µ—Ä–µ. –í Telegram –æ—Ç—á–µ—Ç –æ—Ç–ø—Ä–∞–≤–∏—Ç—Å—è —á–µ—Ä–µ–∑ sendData().\n\n" + JSON.stringify(report, null, 2));
      return;
    }

    tg.HapticFeedback.impactOccurred('medium');
    tg.showConfirm("–û—Ç–ø—Ä–∞–≤–∏—Ç—å –æ—Ç—á–µ—Ç –∏ –∑–∞–≤–µ—Ä—à–∏—Ç—å –¥–µ–Ω—å?", (ok) => {
      if (ok) tg.sendData(JSON.stringify(report));
    });
  }

  render();
</script>
